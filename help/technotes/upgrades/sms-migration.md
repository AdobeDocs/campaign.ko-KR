---
title: 새 SMS 커넥터 v2로 이동
description: 새 SMS 커넥터 v2로 이동하는 방법 알아보기
feature: Technote
role: Admin
source-git-commit: 6f29a7f157c167cae6d304f5d972e2e958a56ec8
workflow-type: tm+mt
source-wordcount: '796'
ht-degree: 0%

---

# 새 SMS 커넥터 v2로 이동

이 문서에서는 MTA 기반 SMS 커넥터에서 Adobe Campaign v8의 새 **전용 SMS 프로세스 커넥터**(으)로 마이그레이션할 때의 절차 및 주요 고려 사항에 대해 간략히 설명합니다.

## v2 커넥터로 전환하는 이유

전용 SMS 프로세스에서는 SMPP 송수신기 모드를 지원하여 연결 수를 줄이고 리소스 효율성을 개선하는 동시에 필요한 경우 송신기/수신기 설정을 계속 지원합니다. 오류 복구 속도, 지속적인 연결, 로컬 파일 또는 프로세스 간 통신에 대한 의존도 없이 훨씬 뛰어난 안정성을 제공합니다. 또한 대기 시간이 짧고 처리량이 많으며 지능적인 마이크로 버칭을 통해 속도와 안정성 간의 균형을 맞출 수 있어 성능이 향상되었습니다. 또한 SMS 프로세스를 분리하면 문제 해결이 간단해지고 크로스 채널 영향이 최소화됩니다. 이러한 향상된 기능을 통해 전용 커넥터는 SMS 전송을 위한 보다 강력하고 확장 가능한 솔루션이 되었습니다.

## v1 및 v2 커넥터의 차이점

Adobe Campaign v8의 전용 SMS 커넥터에는 MTA 기반 커넥터와 비교하여 몇 가지 아키텍처 변경 사항이 도입되었습니다. 한 가지 주요 차이점은 SMPP 송수신기 모드의 기본 사용인데, 이 모드는 송신 및 수신 기능을 결합하여 연결 수를 줄입니다. 공급자가 이 모드를 지원하지 않는 경우에도 개별 송신기 및 수신기 연결을 사용할 수 있습니다. MTA 커넥터와 달리 자동 답장을 활성화해도 연결 수에 영향을 주지 않으며 모든 수신자 연결은 모든 유형의 수신 메시지를 처리할 수 있습니다.

이제 연결 수가 다른 공식을 사용하여 계산됩니다.

```
Total connections = SMS sending threads * Number of MTA child connections. 
```

serverConf에 정의된 sendingThreads 매개 변수는 기본적으로 1로 설정되며 높은 성능을 위해 특별히 최적화하지 않는 한 일반적으로 변경되지 않습니다. 단일 프로세스가 모든 SMS 트래픽을 처리하므로 이러한 매개 변수를 통해 병렬 처리를 관리하는 것은 시스템 로드와 동작을 제어하는 데 매우 중요합니다.

전송 창은 MTA 커넥터와 유사하게 동작하지만 전용 모드의 성능에 훨씬 더 큰 영향을 줍니다. 전송 윈도우가 늘어나면 데이터베이스 IOPS가 줄어들고 처리량이 향상됩니다. 공급자가 이 기능을 지원하고 사용 사례에서 연결 문제 발생 시 메시지 손실이나 중복의 여지가 적은 경우 Campaign은 1000개가 넘는 메시지 창을 효율적으로 처리할 수 있습니다. 공급자 측면에서는 더 큰 SR 전송 창을 구성하면 게재 보고서 처리량도 크게 향상시킬 수 있습니다.

마지막으로, MO(Mobile Originated) 메시지 처리는 기능적으로 변경되지 않지만 기본 코드가 업데이트되었습니다. 연결당 처리량은 여전히 동일한 방식으로 제한되지만 전용 커넥터를 사용하면 훨씬 더 빠른 버스트 전송을 수행할 수 있습니다. 그러나 처리량 제한 없이 고속 전송이 제공업체나 시스템 리소스를 압도할 수 있으므로 외부 계정 구성에서 명시적 MT 처리량 상한을 설정하는 것이 좋습니다.

## 전환 절차

전용 SMS 프로세스로 원활하게 전환하려면 SMS 트래픽이 적거나 없는 동안 작업을 수행하는 것이 가장 좋습니다. MTA 버퍼가 완전히 플러시되지 않은 경우 일부 버퍼된 메시지가 손실되거나 잘못된 상태로 남을 수 있습니다. 또한 예기치 않은 SR 타이밍으로 인해 스위치 후 최대 1주일 동안 일부 SR을 놓치는 것이 일반적입니다. 이러한 예방 조치를 따르지 않을 경우 내장된 보호 장치에도 불구하고 메시지가 손실되거나 중복될 수 있습니다.

두 SMS 커넥터 모두 SR(상태 보고서) 처리에 다양한 형식을 사용합니다. 두 테이블 모두 `NmsProviderMsgId` 테이블에 의존하지만 서로 다르게 상호 작용합니다. 따라서 커넥터를 전환하려면 충돌이나 고립된 데이터를 방지하기 위해 전체 테이블을 지워야 합니다. 이 정리를 수행하는 방법에는 몇 가지가 있습니다. 다음은 사용할 수 있는 SQL 쿼리입니다.

```
TRUNCATE TABLE NmsProviderMsgId;
TRUNCATE TABLE NmsProviderMsgStatus;
```

### 단계

1. `serverConf` 설정(`sms > mta2`)을 검토합니다.
1. 실시간 메시지 준비 워크플로우 일시 중지(해당하는 경우).
1. 모든 SMS 게재를 일시 중지합니다.
1. SMS 외부 계정을 비활성화합니다.
1. MTA 및 SMS 프로세스를 중지하고 다시 시작합니다.
1. SMPP 연결이 활성화되지 않았는지 확인합니다. 존재하는 경우 모든 게재가 일시 중지되었는지 확인합니다.
1. 데이터베이스에서 `NmsProviderMsgId` 및 `NmsProviderMsgStatus` 테이블의 내용을 지웁니다.
1. 외부 계정에서:
   * &quot;전용 프로세스&quot; 확인란 활성화
   * 기타 설정 조정: MTA 하위 연결, MT 처리량, 전송 창
1. 외부 계정을 다시 활성화하고 저장합니다.
1. SMS 게재를 다시 시작합니다.
1. SMS 서비스가 정상적으로 작동하는지 확인하십시오.

>[!NOTE]
>
>SMS, MTA 및 MTA 하위 로그에서 오류 또는 문제를 모니터링합니다.
>
>롤백을 위해 이전 외부 계정 설정을 저장합니다.

### 롤백 프로시저

MTA 커넥터로 롤백하는 것은 초기 전환 시 사용한 동일한 단계를 동일한 순서로 수행하여 가능합니다. 여기에는 모든 SMS 게재를 중지 또는 일시 중지하고 원래 외부 계정 구성을 복원하는 작업이 포함됩니다.

1. 인스턴스에서 실시간 게재를 사용하는 경우 해당 메시지 준비를 담당하는 기술 워크플로우를 일시 중지합니다.
1. 모든 SMS 게재를 일시 중지합니다.
1. SMS 외부 계정을 비활성화합니다.
1. MTA 및 SMS 프로세스를 모두 중지하고 다시 시작합니다.
1. SMPP 연결이 활성 상태로 유지되지 않았는지 확인하고, 활성화된 경우 모든 게재가 제대로 일시 중지되었는지 확인하십시오.
1. 데이터베이스에서 `NmsProviderMsgId` 및 `NmsProviderMsgStatus` 테이블을 지웁니다.
1. 외부 계정에서:
   * 외부 계정에서 &quot;전용 프로세스&quot; 옵션의 선택을 취소합니다.
   * 모든 이전 외부 계정 설정 복원: MTA 하위 연결, MT 처리량, 전송 창
1. 외부 계정을 다시 활성화하고 저장합니다.
1. 모든 SMS 게재를 다시 시작합니다.
1. 마지막으로 SMS 서비스가 정상적으로 작동하는지 확인하십시오.
